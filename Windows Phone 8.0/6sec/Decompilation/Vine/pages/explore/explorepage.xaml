<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    x:Class="Vine.Pages.Explore.ExplorePage"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True" shell:SystemTray.Opacity="0" shell:SystemTray.ForegroundColor="#ff808080">
    <phone:PhoneApplicationPage.Resources>
        <DataTemplate x:Key="PivotHeaderDataTemplate">
            <TextBlock Text="{Binding ''}" Margin="-12,0,0,0" FontSize="56" />
        </DataTemplate>

    </phone:PhoneApplicationPage.Resources>

    <phone:PhoneApplicationPage.FontFamily>
        <StaticResource ResourceKey="PhoneFontFamilyNormal"/>
    </phone:PhoneApplicationPage.FontFamily>
    <phone:PhoneApplicationPage.FontSize>
        <StaticResource ResourceKey="PhoneFontSizeNormal"/>
    </phone:PhoneApplicationPage.FontSize>
    <phone:PhoneApplicationPage.Foreground>
        <StaticResource ResourceKey="PhoneForegroundBrush"/>
    </phone:PhoneApplicationPage.Foreground>
    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Height="80" Background="{StaticResource ModernHeaderBrush}">
            <Grid Margin="24,24,0,0">
                <ContentControl HorizontalAlignment="Left" Height="25"  Style="{StaticResource LogoStyle}" Width="32"/> 
                <TextBlock Text="{Binding LocalizedResources.TitleExplore, Source={StaticResource LocalizedStrings}}" FontFamily="Segoe WP Semibold" FontSize="26.667" Margin="40,0,0,0" Foreground="{StaticResource ModernForegroundBrush}" VerticalAlignment="Center" HorizontalAlignment="Left"  />
            </Grid>
        </Grid>

        <Grid x:Name="ContentPanel" Grid.Row="1"  Background="{StaticResource NoStripeBrush}" >
            <phone:Pivot x:Name="ResultPivot"  HeaderTemplate="{StaticResource PivotHeaderDataTemplate}" Margin="0,-14,0,0" Foreground="#FF6C6C6C">
                <phone:PivotItem  Header="{Binding LocalizedResources.Highlight, Source={StaticResource LocalizedStrings}}">
                    <ScrollViewer>
                        <StackPanel>
                            <Grid MinHeight="150">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="*" />
								</Grid.ColumnDefinitions>
                                <Button  Background="{StaticResource ModernHeaderBrush}" FontFamily="Segoe WP SemiLight" FontSize="26.667" BorderThickness="0" Margin="-12,0,-6,0" Click="Popular_Click" Foreground="{StaticResource DarkGreyBrush}" >
								<StackPanel>
								<Image Source="/Assets/Explore/star.png" Height="55" Width="55"/>
									<TextBlock Foreground="{StaticResource ModernForegroundBrush}" Text="{Binding LocalizedResources.PopularNow, Source={StaticResource LocalizedStrings}}" Margin="0,6,0,0" TextWrapping="Wrap" TextAlignment="Center"/>
								</StackPanel>

								</Button>
                            <Button Background="{StaticResource ModernHeaderBrush}" FontFamily="Segoe WP SemiLight" FontSize="26.667" BorderThickness="0" Margin="-6,0,-12,0" Click="OnTheRise_Click" Grid.Column="1" Foreground="{StaticResource DarkGreyBrush}">
									<StackPanel>
								<Image Source="/Assets/Explore/rising.png" Height="55" Width="55"/>
                                        <TextBlock Foreground="{StaticResource ModernForegroundBrush}" Text="{Binding LocalizedResources.OnTheRise, Source={StaticResource LocalizedStrings}}" Margin="0,6,0,0" TextWrapping="Wrap" TextAlignment="Center"/>
								</StackPanel>

								</Button>
								</Grid>
							
                            <ItemsControl x:Name="HighlightList" Margin="0,12,0,0" ItemsSource="{Binding Channels}" >
                                <!-- <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <toolkit:WrapPanel />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                -->
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Button Height="68" Margin="0,0,0,18" Style="{StaticResource SimpleButtonStyle}" Click="Channels_Click">
                                            <Grid>
                                                <Grid.Background>
                                                    <SolidColorBrush Color="{Binding BackgroundColor}"/>
                                                </Grid.Background>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="70" />
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Image Source="{Binding Thumb}" Stretch="Uniform"/>
                                                    <TextBlock Grid.Column="1" Text="{Binding Name}"  Margin="0,0,0,6" VerticalAlignment="Center" FontFamily="Segoe WP SemiLight" FontSize="32">
                                                        <TextBlock.Foreground>
                                                            <SolidColorBrush Color="{Binding ForegroundColor}"/>
                                                        </TextBlock.Foreground>
                                                    </TextBlock>
                                                </Grid>
                                            </Grid>
                                        </Button>

                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>
                </phone:PivotItem>
          
                <phone:PivotItem Header="{Binding LocalizedResources.Trending, Source={StaticResource LocalizedStrings}}">
                    <ScrollViewer>
                        <ItemsControl Margin="-12,0" ItemsSource="{Binding Tags}" >
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <toolkit:WrapPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Button Click="Trendings_Click" Margin="6" BorderThickness="0" Style="{StaticResource SimpleButtonStyle}" >
                                        <Border Background="{StaticResource PrincBrush}" >
                                            <TextBlock Foreground="White" FontFamily="Segoe WP"  FontSize="26" Margin="8,4">
                                                <Run Text="#" FontFamily="Segoe WP Bold"/><Run Text="{Binding }" />
                                            </TextBlock>
                                        </Border>
                                    </Button>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </phone:PivotItem>
            </phone:Pivot>



        </Grid>
        <Rectangle Grid.Row="2"  IsHitTestVisible="False" Fill="#14000000" Height="5" VerticalAlignment="Top"/>

        <Grid Grid.RowSpan="3" Visibility="{Binding IsLoading, Converter={StaticResource VisibilityConverter}}" Background="#7F000000" d:IsHidden="True">
            <StackPanel VerticalAlignment="Center">
                <ProgressBar Background="Transparent" IsIndeterminate="{Binding IsLoading}" Foreground="White"  />
                <TextBlock Text="{Binding LocalizedResources.Loading, Source={StaticResource LocalizedStrings}}" TextAlignment="Center" FontFamily="Segoe WP Light" />
            </StackPanel>
        </Grid>

    </Grid>

</phone:PhoneApplicationPage>