<phone:PhoneApplicationPage x:Class="Vine.Pages.PreviewCamera.PreviewCameraPage"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:controls="clr-namespace:Vine.Controls"
                            mc:Ignorable="d" d:DesignWidth="800"
                            d:DesignHeight="480" FontFamily="{StaticResource PhoneFontFamilyNormal}"
                            FontSize="{StaticResource PhoneFontSizeNormal}" Foreground="{StaticResource PhoneForegroundBrush}"
                            SupportedOrientations="Portrait" Orientation="Portrait" shell:SystemTray.IsVisible="True" shell:SystemTray.Opacity="0"
                            shell:SystemTray.ForegroundColor="#fffffe">
    <phone:PhoneApplicationPage.Resources>

        <Style x:Key="ProgressBarStyle1" TargetType="ProgressBar">
            <Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}" />
            <Setter Property="Background" Value="{StaticResource PhoneProgressBarBackgroundBrush}" />
            <Setter Property="Maximum" Value="100" />
            <Setter Property="IsHitTestVisible" Value="False" />
            <Setter Property="Padding" Value="{StaticResource PhoneHorizontalMargin}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Determinate" />
                                    <VisualState x:Name="Indeterminate">
                                        <Storyboard Duration="00:00:00" RepeatBehavior="Forever">
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility"
                                                                           Storyboard.TargetName="DeterminateRoot">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid x:Name="DeterminateRoot" Margin="{TemplateBinding Padding}" Visibility="Visible">
                                <Rectangle x:Name="ProgressBarTrack" Fill="{TemplateBinding Background}" />
                                <Rectangle x:Name="ProgressBarIndicator" Fill="{TemplateBinding Foreground}"
                                           HorizontalAlignment="Left" />
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </phone:PhoneApplicationPage.Resources>


    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Black">
        <!--Camera viewfinder >-->


        <!--Camera viewfinder >-->

        <Grid x:Name="PreviewPanel"  Height="480" Margin="0,140,0,0" 
			   
              VerticalAlignment="Top">
            <!-- <Grid.Clip>
                <RectangleGeometry Rect="0,0,480,480"/>
            </Grid.Clip>
          -->
            <MediaElement x:Name="MediaPlayer" MediaEnded="MediaPlayer_MediaEnded" Width="480" Height="480" />
        </Grid>

        <StackPanel Margin="24,42,0,0" >
            <TextBlock Text="{Binding LocalizedResources.Preview, Source={StaticResource LocalizedStrings},Converter={StaticResource ToUpperConverter}}"
                   FontSize="30" FontFamily="Segoe WP SemiBold" VerticalAlignment="Top" />
            <TextBlock x:Name="PreviewSubtitleTextBlock" Text="{Binding LocalizedResources.PreviewSubtitle, Source={StaticResource LocalizedStrings}}"
                   FontSize="20" FontFamily="Segoe WP Light" Opacity="0.5" VerticalAlignment="Top" />
        </StackPanel>

        <Grid x:Name="ModernAppBarContainer" >
            <controls:ModernAppBar x:Name="ModernInstaMainAppBar" Background="Black">
                <controls:ModernAppBar.Buttons>
                    <controls:ModernAppBarButton Content="&#57517;" Click="AppBarNext_Click"
                                                 Text="{Binding LocalizedResources.Next, Source={StaticResource LocalizedStrings},Converter={StaticResource ToUpperConverter}}"/>
                </controls:ModernAppBar.Buttons>

            </controls:ModernAppBar>

        </Grid>

    </Grid>

</phone:PhoneApplicationPage>