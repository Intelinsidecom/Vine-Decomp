<phone:PhoneApplicationPage xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                           xmlns:converter="clr-namespace:Vine.Converters"
                            xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
                            xmlns:control="clr-namespace:Vine.Controls"
                            xmlns:controls="clr-namespace:Vine.Controls"
                            x:Class="Vine.Pages.ManageAccount.ManageAccountPage" SupportedOrientations="Portrait"
                            Orientation="Portrait" mc:Ignorable="d" shell:SystemTray.IsVisible="True" shell:SystemTray.Opacity="0"
                            shell:SystemTray.ForegroundColor="#FF808080">
    <phone:PhoneApplicationPage.Resources>
        <DataTemplate x:Key="HeaderDataTemplate">
            <TextBlock Text="{Binding}" Foreground="{StaticResource DarkGreyBrush}" FontFamily="Segoe WP SemiLight"
                       FontSize="34" />
        </DataTemplate>
    </phone:PhoneApplicationPage.Resources>
    <phone:PhoneApplicationPage.FontFamily>
        <StaticResource ResourceKey="PhoneFontFamilyNormal" />
    </phone:PhoneApplicationPage.FontFamily>
    <phone:PhoneApplicationPage.FontSize>
        <StaticResource ResourceKey="PhoneFontSizeNormal" />
    </phone:PhoneApplicationPage.FontSize>
    <phone:PhoneApplicationPage.Foreground>
        <StaticResource ResourceKey="PhoneForegroundBrush" />
    </phone:PhoneApplicationPage.Foreground>
    <Grid>
        <Grid x:Name="LayoutRoot" Background="{StaticResource NoStripeBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="{StaticResource ModernAppBarRowHeight}"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Height="80" Background="{StaticResource ModernHeaderBrush}">
                <Grid Margin="24,24,0,0">
                    <ContentControl HorizontalAlignment="Left" Height="25"  Style="{StaticResource LogoStyle}" Width="32"/>
                    <TextBlock
                        Text="{Binding LocalizedResources.TitleAccountManager, Source={StaticResource LocalizedStrings}}"
                        FontFamily="Segoe WP Semibold" FontSize="26.667" Margin="40,0,0,0" Foreground="{StaticResource ModernForegroundBrush}" VerticalAlignment="Center"
                        HorizontalAlignment="Left" />
                </Grid>
            </Grid>
            <ListBox Grid.Row="1" SelectionChanged="User_SelectionChanged" ItemsSource="{Binding Users}" Margin="24,0,0,0" ItemContainerStyle="{StaticResource StretchListBoxItemStyle}">

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,12" Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="auto"/>
                            </Grid.ColumnDefinitions>
                            <toolkit:ContextMenuService.ContextMenu>
                                <toolkit:ContextMenu IsZoomEnabled="false" Background="White">
                                    <toolkit:MenuItem Header="{Binding LocalizedResources.SelectAsPrimaryAccount, Source={StaticResource LocalizedStrings}}" Click="SetPrimary_Click" />
                                    <toolkit:MenuItem Header="{Binding LocalizedResources.Remove, Source={StaticResource LocalizedStrings}}" Click="RemoveAccount_Click" />
                                </toolkit:ContextMenu>
                            </toolkit:ContextMenuService.ContextMenu>

                            <Image Source="{Binding User.User.Picture}"  Height="70" Width="70"  Margin="0,0,12,0">
                                <Image.Clip>
                                    <EllipseGeometry RadiusX="35" RadiusY="35" Center="35,35"/>
                                </Image.Clip>
                            </Image>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="{Binding User.Name}" Foreground="{StaticResource ThemeTextBrush}" FontSize="22" FontFamily="Segoe WP Semibold" />
                                <TextBlock Text="{Binding LocalizedResources.PrimaryAccount, Source={StaticResource LocalizedStrings}}" Visibility="{Binding IsPrimary, Converter={StaticResource VisibilityConverter}}" FontSize="18" FontFamily="Segoe WP Light" Foreground="{StaticResource PrincBrush}" Margin="0,-5,0,0" />
                            </StackPanel>
                            <TextBlock Text="&#57345;" FontFamily="{StaticResource SegoeMDL2Font}"
                                       FontSize="40" VerticalAlignment="Center"
                                       Grid.Column="2" Visibility="{Binding IsCurrent, Converter={StaticResource VisibilityConverter}}"  
                                       Foreground="{StaticResource PrincBrush}" 
                                       Margin="12,0,24,0"/>

                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Rectangle x:Name="ShadowRectangle" Visibility="Collapsed" Grid.Row="1" IsHitTestVisible="False" Fill="{StaticResource ShadowBrush}" Height="5" VerticalAlignment="Top" />
        </Grid>


        <Grid x:Name="ModernAppBarContainer" >
            <controls:ModernAppBar x:Name="ModernInstaMainAppBar" >
                <controls:ModernAppBar.Buttons>
                    <controls:ModernAppBarButton Content="&#57826;"  Click="Add_Click" Text="{Binding LocalizedResources.Add, Source={StaticResource LocalizedStrings}}" />
                </controls:ModernAppBar.Buttons>
            </controls:ModernAppBar>
        </Grid>

    </Grid>


</phone:PhoneApplicationPage>