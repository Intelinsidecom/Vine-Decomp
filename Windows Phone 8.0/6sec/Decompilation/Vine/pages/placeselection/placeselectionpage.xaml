<phone:PhoneApplicationPage
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:Controls="clr-namespace:Vine.Controls" xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
 x:Class="Vine.Pages.PlaceSelection.PlaceSelectionPage"
                            SupportedOrientations="Portrait" Orientation="Portrait"
                            mc:Ignorable="d" shell:SystemTray.IsVisible="True" shell:SystemTray.Opacity="0"
                            shell:SystemTray.ForegroundColor="#FF808080">
  
    <phone:PhoneApplicationPage.FontFamily>
        <StaticResource ResourceKey="PhoneFontFamilyNormal"/>
    </phone:PhoneApplicationPage.FontFamily>
    <phone:PhoneApplicationPage.FontSize>
        <StaticResource ResourceKey="PhoneFontSizeNormal"/>
    </phone:PhoneApplicationPage.FontSize>
    <phone:PhoneApplicationPage.Foreground>
        <StaticResource ResourceKey="PhoneForegroundBrush"/>
    </phone:PhoneApplicationPage.Foreground>
    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="{StaticResource NoStripeBrush}">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="VisualStateGroup">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.4">
                        <VisualTransition.GeneratedEasingFunction>
                            <CircleEase EasingMode="EaseOut"/>
                        </VisualTransition.GeneratedEasingFunction>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="DirectSearch"/>
                <VisualState x:Name="Popular">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="-64" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="WhitePanel" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="80" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel x:Name="WhitePanel" Grid.RowSpan="3" RenderTransformOrigin="0.5,0.5" >
            <StackPanel.RenderTransform>
                <CompositeTransform/>
            </StackPanel.RenderTransform>
            <Grid>
                <Rectangle Fill="{StaticResource ModernHeaderBrush}" Height="160" VerticalAlignment="Top"/>

                <Rectangle x:Name="ShadowRectangle" Visibility="Collapsed" Fill="{StaticResource ShadowBrush}" Height="4" VerticalAlignment="Bottom" />
                <ProgressBar Visibility="{Binding IsLoading, Converter={StaticResource VisibilityConverter}}" Background="{x:Null}" 
                             IsIndeterminate="{Binding IsLoading}" VerticalAlignment="Bottom" Foreground="{StaticResource PrincBrush}" />
            </Grid>
        </StackPanel>
        <Grid Grid.Row="0" Height="80" Margin="0">
            <Grid Margin="24,24,0,0">
                <ContentControl HorizontalAlignment="Left" Height="25"  Style="{StaticResource LogoStyle}" Width="32"/>
                <TextBlock Text="{Binding LocalizedResources.TitlePlaceSelection, Source={StaticResource LocalizedStrings}}"
					FontFamily="Segoe WP Semibold" FontSize="26.667" Margin="40,0,0,0" Foreground="{StaticResource ModernForegroundBrush}" VerticalAlignment="Center"
					HorizontalAlignment="Left" />
            </Grid>
        </Grid>


        <Grid Grid.Row="1" >
            <TextBlock Text="{Binding LocalizedResources.EnterYourSearch, Source={StaticResource LocalizedStrings}}"
				Visibility="{Binding Text, ConverterParameter=inverse, Converter={StaticResource StringToVisibilityConverter}, ElementName=SearchBox}"
				FontFamily="Segoe WP SemiLight" VerticalAlignment="Center" FontSize="26.667" Margin="36,0,0,12" Foreground="{StaticResource GreyBrush}" />
            <TextBox x:Name="SearchBox"  FontFamily="Segoe WP SemiLight"  Margin="12,0,12,12" Background="Transparent"
				BorderBrush="{StaticResource GreyBrush}" Padding="12,2,2,2" SelectionBackground="{StaticResource PrincBrush}"
				 />
        </Grid>
        <Grid x:Name="ContentPanel" Grid.Row="2">
            <phone:LongListSelector SelectionChanged="Place_SelectionChanged" ItemsSource="{Binding Places}" >
                <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,12,0,0" Background="#50FFFFFF">

                            <StackPanel Margin="24,0,0,0">
                                <TextBlock Text="{Binding Title}" Foreground="Black" FontSize="22" />
                                <TextBlock Text="{Binding Subtitle}" Foreground="#505050" FontSize="15"  TextWrapping="Wrap"/>
                            </StackPanel>

                        </Grid>
                    </DataTemplate>
                </phone:LongListSelector.ItemTemplate>
            </phone:LongListSelector>


        </Grid>

    </Grid>

</phone:PhoneApplicationPage>